info: 09.11.2022 09:48:50.849 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT 1
info: 09.11.2022 09:48:50.955 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (93ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      
      IF EXISTS
          (SELECT *
           FROM [sys].[objects] o
           WHERE [o].[type] = 'U'
           AND [o].[is_ms_shipped] = 0
           AND NOT EXISTS (SELECT *
               FROM [sys].[extended_properties] AS [ep]
               WHERE [ep].[major_id] = [o].[object_id]
                   AND [ep].[minor_id] = 0
                   AND [ep].[class] = 1
                   AND [ep].[name] = N'microsoft_database_tools_support'
          )
      )
      SELECT 1 ELSE SELECT 0
info: 09.11.2022 09:48:50.959 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT 1
info: 09.11.2022 09:48:54.268 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3,183ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
      IF SERVERPROPERTY('EngineEdition') <> 5
      BEGIN
          ALTER DATABASE [CarShowroomEF] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;
      END;
info: 09.11.2022 09:48:54.596 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (328ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
      DROP DATABASE [CarShowroomEF];
info: 09.11.2022 09:48:55.424 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (286ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
      CREATE DATABASE [CarShowroomEF];
info: 09.11.2022 09:48:55.503 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (79ms) [Parameters=[], CommandType='Text', CommandTimeout='60']
      IF SERVERPROPERTY('EngineEdition') <> 5
      BEGIN
          ALTER DATABASE [CarShowroomEF] SET READ_COMMITTED_SNAPSHOT ON;
      END;
info: 09.11.2022 09:48:55.513 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      SELECT 1
info: 09.11.2022 09:48:55.752 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [CarShowroom] (
          [CarShowroomId] int NOT NULL IDENTITY,
          [City] nvarchar(max) NOT NULL,
          [Street] nvarchar(max) NOT NULL,
          [House] nvarchar(max) NOT NULL,
          CONSTRAINT [PK_CarShowroom] PRIMARY KEY ([CarShowroomId])
      );
info: 09.11.2022 09:48:55.763 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Clients] (
          [ClientId] int NOT NULL IDENTITY,
          [FName] nvarchar(max) NOT NULL,
          [MName] nvarchar(max) NOT NULL,
          [LName] nvarchar(max) NOT NULL,
          [Phone] nvarchar(15) NOT NULL,
          [Email] nvarchar(max) NULL,
          CONSTRAINT [PK_Clients] PRIMARY KEY ([ClientId]),
          CONSTRAINT [CK_Clients_Email] CHECK (Email LIKE '%@%.%'),
          CONSTRAINT [CK_Clients_Phone] CHECK (Phone LIKE '(0[0-9][0-9]) [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]')
      );
info: 09.11.2022 09:48:55.766 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Companies] (
          [Name] nvarchar(450) NOT NULL,
          [SiteComp] nvarchar(max) NULL,
          CONSTRAINT [PK_Companies] PRIMARY KEY ([Name])
      );
info: 09.11.2022 09:48:55.769 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Departments] (
          [DepartmentId] int NOT NULL IDENTITY,
          [Name] nvarchar(450) NOT NULL,
          CONSTRAINT [PK_Departments] PRIMARY KEY ([DepartmentId])
      );
info: 09.11.2022 09:48:55.816 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Brands] (
          [BrandId] int NOT NULL IDENTITY,
          [Name] nvarchar(450) NOT NULL,
          [CompanyName] nvarchar(450) NOT NULL,
          [CompanyId] int NOT NULL,
          CONSTRAINT [PK_Brands] PRIMARY KEY ([BrandId]),
          CONSTRAINT [FK_Brands_Companies_CompanyName] FOREIGN KEY ([CompanyName]) REFERENCES [Companies] ([Name]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.821 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Engines] (
          [EngineId] int NOT NULL IDENTITY,
          [Name] nvarchar(450) NOT NULL,
          [EngineCapacity] float NOT NULL,
          [Power] int NOT NULL DEFAULT 0,
          [FuelType] nvarchar(max) NOT NULL,
          [CompanyName] nvarchar(450) NOT NULL,
          [CompanyId] int NOT NULL,
          CONSTRAINT [PK_Engines] PRIMARY KEY ([EngineId]),
          CONSTRAINT [FK_Engines_Companies_CompanyName] FOREIGN KEY ([CompanyName]) REFERENCES [Companies] ([Name]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.848 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (27ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Workers] (
          [WorkerId] int NOT NULL IDENTITY,
          [FName] nvarchar(max) NOT NULL,
          [MName] nvarchar(max) NOT NULL,
          [LName] nvarchar(max) NOT NULL,
          [Phone] nvarchar(max) NOT NULL,
          [Salary] money NOT NULL,
          [BirthDate] datetime2 NOT NULL,
          [DepartmentId] int NOT NULL,
          [Discriminator] nvarchar(max) NOT NULL,
          [Email] nvarchar(max) NULL,
          CONSTRAINT [PK_Workers] PRIMARY KEY ([WorkerId]),
          CONSTRAINT [CK_Workers_Phone] CHECK (Phone LIKE '(0[0-9][0-9]) [0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9]'),
          CONSTRAINT [CK_Workers_Salary] CHECK (Salary > 0),
          CONSTRAINT [FK_Workers_Departments_DepartmentId] FOREIGN KEY ([DepartmentId]) REFERENCES [Departments] ([DepartmentId]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.876 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Models] (
          [ModelId] int NOT NULL IDENTITY,
          [Name] nvarchar(max) NOT NULL,
          [ProdYearFrom] int NOT NULL,
          [ProdYearTo] int NULL,
          [BrandId] int NOT NULL,
          CONSTRAINT [PK_Models] PRIMARY KEY ([ModelId]),
          CONSTRAINT [FK_Models_Brands_BrandId] FOREIGN KEY ([BrandId]) REFERENCES [Brands] ([BrandId]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.881 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [CarShowroomWorker] (
          [CarShowroomsCarShowroomId] int NOT NULL,
          [WorkersWorkerId] int NOT NULL,
          CONSTRAINT [PK_CarShowroomWorker] PRIMARY KEY ([CarShowroomsCarShowroomId], [WorkersWorkerId]),
          CONSTRAINT [FK_CarShowroomWorker_CarShowroom_CarShowroomsCarShowroomId] FOREIGN KEY ([CarShowroomsCarShowroomId]) REFERENCES [CarShowroom] ([CarShowroomId]) ON DELETE CASCADE,
          CONSTRAINT [FK_CarShowroomWorker_Workers_WorkersWorkerId] FOREIGN KEY ([WorkersWorkerId]) REFERENCES [Workers] ([WorkerId]) ON DELETE CASCADE
      );
info: 09.11.2022 09:48:55.884 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [DepartmentHeadManager] (
          [HeadManagersWorkerId] int NOT NULL,
          [ManagedDepartmentsDepartmentId] int NOT NULL,
          CONSTRAINT [PK_DepartmentHeadManager] PRIMARY KEY ([HeadManagersWorkerId], [ManagedDepartmentsDepartmentId]),
          CONSTRAINT [FK_DepartmentHeadManager_Departments_ManagedDepartmentsDepartmentId] FOREIGN KEY ([ManagedDepartmentsDepartmentId]) REFERENCES [Departments] ([DepartmentId]) ON DELETE CASCADE,
          CONSTRAINT [FK_DepartmentHeadManager_Workers_HeadManagersWorkerId] FOREIGN KEY ([HeadManagersWorkerId]) REFERENCES [Workers] ([WorkerId]) ON DELETE CASCADE
      );
info: 09.11.2022 09:48:55.888 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Equipments] (
          [EquipmentId] int NOT NULL IDENTITY,
          [Name] nvarchar(max) NOT NULL,
          [Price] money NOT NULL,
          [Gearbox] nvarchar(max) NOT NULL,
          [Transmission] nvarchar(max) NOT NULL,
          [EngineId] int NOT NULL,
          [ModelId] int NOT NULL,
          CONSTRAINT [PK_Equipments] PRIMARY KEY ([EquipmentId]),
          CONSTRAINT [FK_Equipments_Engines_EngineId] FOREIGN KEY ([EngineId]) REFERENCES [Engines] ([EngineId]) ON DELETE NO ACTION,
          CONSTRAINT [FK_Equipments_Models_ModelId] FOREIGN KEY ([ModelId]) REFERENCES [Models] ([ModelId]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.896 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Automobiles] (
          [VIN] nvarchar(17) NOT NULL,
          [ProdDate] datetime2 NOT NULL DEFAULT '2022-11-09T09:48:55.0984390+02:00',
          [BodyType] nvarchar(max) NOT NULL,
          [Color] nvarchar(max) NOT NULL,
          [BrandId] int NOT NULL,
          [ModelId] int NOT NULL,
          [EquipmentId] int NOT NULL,
          CONSTRAINT [PK_Automobiles] PRIMARY KEY ([VIN]),
          CONSTRAINT [FK_Automobiles_Brands_BrandId] FOREIGN KEY ([BrandId]) REFERENCES [Brands] ([BrandId]) ON DELETE NO ACTION,
          CONSTRAINT [FK_Automobiles_Equipments_EquipmentId] FOREIGN KEY ([EquipmentId]) REFERENCES [Equipments] ([EquipmentId]) ON DELETE NO ACTION,
          CONSTRAINT [FK_Automobiles_Models_ModelId] FOREIGN KEY ([ModelId]) REFERENCES [Models] ([ModelId]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.899 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Avaibilities] (
          [VINAuto] nvarchar(17) NOT NULL,
          [CarShowroomId] int NOT NULL,
          CONSTRAINT [PK_Avaibilities] PRIMARY KEY ([CarShowroomId], [VINAuto]),
          CONSTRAINT [FK_Avaibilities_Automobiles_VINAuto] FOREIGN KEY ([VINAuto]) REFERENCES [Automobiles] ([VIN]) ON DELETE NO ACTION,
          CONSTRAINT [FK_Avaibilities_CarShowroom_CarShowroomId] FOREIGN KEY ([CarShowroomId]) REFERENCES [CarShowroom] ([CarShowroomId]) ON DELETE NO ACTION
      );
info: 09.11.2022 09:48:55.903 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [Orders] (
          [OrderId] int NOT NULL IDENTITY,
          [OrderDateTime] datetime2 NOT NULL DEFAULT '2022-11-09T09:48:55.1050517+02:00',
          [Status] nvarchar(max) NOT NULL,
          [PaymentMethod] nvarchar(max) NOT NULL,
          [PurchaseDateTime] datetime2 NOT NULL,
          [ClientId] int NOT NULL,
          [VinAuto] nvarchar(17) NOT NULL,
          CONSTRAINT [PK_Orders] PRIMARY KEY ([OrderId]),
          CONSTRAINT [FK_Orders_Automobiles_VinAuto] FOREIGN KEY ([VinAuto]) REFERENCES [Automobiles] ([VIN]) ON DELETE NO ACTION,
          CONSTRAINT [FK_Orders_Clients_ClientId] FOREIGN KEY ([ClientId]) REFERENCES [Clients] ([ClientId]) ON DELETE CASCADE
      );
info: 09.11.2022 09:48:55.907 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE TABLE [OrderWorker] (
          [OrdersOrderId] int NOT NULL,
          [WorkersWorkerId] int NOT NULL,
          CONSTRAINT [PK_OrderWorker] PRIMARY KEY ([OrdersOrderId], [WorkersWorkerId]),
          CONSTRAINT [FK_OrderWorker_Orders_OrdersOrderId] FOREIGN KEY ([OrdersOrderId]) REFERENCES [Orders] ([OrderId]) ON DELETE CASCADE,
          CONSTRAINT [FK_OrderWorker_Workers_WorkersWorkerId] FOREIGN KEY ([WorkersWorkerId]) REFERENCES [Workers] ([WorkerId]) ON DELETE CASCADE
      );
info: 09.11.2022 09:48:55.915 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Automobiles_BrandId] ON [Automobiles] ([BrandId]);
info: 09.11.2022 09:48:55.948 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (32ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Automobiles_EquipmentId] ON [Automobiles] ([EquipmentId]);
info: 09.11.2022 09:48:55.949 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Automobiles_ModelId] ON [Automobiles] ([ModelId]);
info: 09.11.2022 09:48:55.952 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Avaibilities_VINAuto] ON [Avaibilities] ([VINAuto]);
info: 09.11.2022 09:48:55.955 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Brands_CompanyName] ON [Brands] ([CompanyName]);
info: 09.11.2022 09:48:55.956 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE UNIQUE INDEX [IX_Brands_Name] ON [Brands] ([Name]);
info: 09.11.2022 09:48:55.958 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_CarShowroomWorker_WorkersWorkerId] ON [CarShowroomWorker] ([WorkersWorkerId]);
info: 09.11.2022 09:48:56.025 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (67ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_DepartmentHeadManager_ManagedDepartmentsDepartmentId] ON [DepartmentHeadManager] ([ManagedDepartmentsDepartmentId]);
info: 09.11.2022 09:48:56.028 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE UNIQUE INDEX [IX_Departments_Name] ON [Departments] ([Name]);
info: 09.11.2022 09:48:56.030 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Engines_CompanyName] ON [Engines] ([CompanyName]);
info: 09.11.2022 09:48:56.032 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE UNIQUE INDEX [IX_Engines_Name] ON [Engines] ([Name]);
info: 09.11.2022 09:48:56.034 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Equipments_EngineId] ON [Equipments] ([EngineId]);
info: 09.11.2022 09:48:56.036 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Equipments_ModelId] ON [Equipments] ([ModelId]);
info: 09.11.2022 09:48:56.038 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Models_BrandId] ON [Models] ([BrandId]);
info: 09.11.2022 09:48:56.039 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Orders_ClientId] ON [Orders] ([ClientId]);
info: 09.11.2022 09:48:56.041 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Orders_VinAuto] ON [Orders] ([VinAuto]);
info: 09.11.2022 09:48:56.042 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_OrderWorker_WorkersWorkerId] ON [OrderWorker] ([WorkersWorkerId]);
info: 09.11.2022 09:48:56.045 RelationalEventId.CommandExecuted[20101] (Microsoft.EntityFrameworkCore.Database.Command) 
      Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
      CREATE INDEX [IX_Workers_DepartmentId] ON [Workers] ([DepartmentId]);
